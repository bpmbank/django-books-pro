{% extends "base.html" %}
{% load i18n %}
<title>{% block title %}虫虫读书 - 与世界一起品读好书{% endblock %}</title>

{% block content %}
{% if user.is_authenticated %}
<div id="anony-reg">
    <div class="wrapper">
        <div class="login">
            {#<li><a class="btn btn-primary" href="{% url "login" %}">登录 </a></li>#}
            {#<li><a class="btn btn-default" href="{% url "register" %}">注册</a></li>#}
            {#<a class="btn btn-default" href="{% url "userena_signin" %}">购书单</a>#}
            {# <li><a class="btn btn-default" href="{% url "userena_signup" %}">注册</a></li> #}
        </div>
        <div class="reg">
            <a class="lnk-reg" href="{% url 'books_app.views.booklist' %}">书单</a>
            <a class="btn-success pull-right" href="{% url "logout" %}">注销</a>
        </div>
    </div>
</div>
{% else %}
    <div id="anony-reg">
    <div class="wrapper">
        <div class="login">
            {#<li><a class="btn btn-primary" href="{% url "login" %}">登录 </a></li>#}
            {#<li><a class="btn btn-default" href="{% url "register" %}">注册</a></li>#}
            <a class="btn btn-default" href="{% url "userena_signin" %}">登录</a><i></i>
            {# <li><a class="btn btn-default" href="{% url "userena_signup" %}">注册</a></li> #}
        </div>
        <div class="reg">
            <a class="lnk-reg" href="{% url "register" %}">加入我们<i>注册</i></a>
            <div class="nb-info">
                <b>发现更多好书</b>
            </div>
        </div>
    </div>
</div>
{% endif %}

<div id="anony-books" class="secition">
    <div class="container">
            <section id="viewbook" class="col-lg-9 col-md-9 col-sm-9 libBox">
            <div class="article">
            <div class="secition">
                <h2>新书速递</h2>
                <a href="">更多</a>

                <div id="list">
                    <div class="page"></div>
                    <div class="page"></div>
                    <div class="page"></div>
                    <div class="page"></div>
                    <div id="back" src="{{ STATIC_URL }}img/left_right.gif" title="后退"></div>
                    <div id="next" src="{{ STATIC_URL }}img/left_right.gif" title="前进"></div>
                    <div id="clear"></div>
                </div>
                <div id="shelf">
                    <div id="images">
                        {% for item in list_items %}
                            <a href="{% url 'books_app.views.view_book' item.id %}"><img src="{{item.cover_img}}" alt=""></a>
                        {% endfor %}
                    </div>
                </div>

            </div>
            </div>
            </section>
            <article class="col-lg-3 col-md-3 col-sm-3">
                <h3><span class="fa fa-star"></span>虫虫读书榜</h3>
                <ul class="list2">
                    <li><a href="index.html#">月度最佳</a></li>
                    <li><a href="index.html#">年度最佳</a></li>
                    <li><a href="index.html#">Award Winners</a></li>
                    <li><a href="index.html#">Bestsellers</a></li>
                </ul>
                <h3><span class="fa fa-asterisk"></span>COLLECTIONS</h3>
                <ul class="list2">
                    <li><a href="index.html#">Books</a></li>
                    <li><a href="index.html#">E-books & Audiobooks</a></li>
                    <li><a href="index.html#">Movies</a></li>
                    <li><a href="index.html#">Music & Recordings</a></li>
                    <li><a href="index.html#">Periodicals</a></li>
                    <li><a href="index.html#">Images</a></li>
                    <li><a href="index.html#">Braille & Talking Books</a></li>
                </ul>
                <div class="locationBox">
                    <h3><span class="fa fa-map-marker"></span>线下活动</h3>
                    <p>8901 Marmora Road,<br>Glasgow, D04 89GR.</p>
                </div>
                <div class="locationBox">
                    <h3><span class="fa fa-user"></span>Admission</h3>
                    <p>Free</p>
                </div>
                <div class="locationBox">
                    <h3><span class="fa fa-clock-o"></span>Open</h3>
                    <p>10 am - 9 pm daily</p>
                </div>
            </article>
            <div class="clearfix"></div>
            <article class="col-lg-12 col-md-12 col-sm-12">
                <div class="list_carousel1 responsive clearfix">
                    <h2>虫虫读书,陪你走过阅读的美好时光</h2>
                    <ul id="foo1">
                        <li><p><span></span>书虫将自己裹在言辞之网中，只能看见别人思想反应出来的事物的朦胧影象. <em></em><strong>- W.哈兹里特</strong></p></li>
                        <li><p><span></span>阅读的最大理由是想摆脱平庸，早一天就多一份人生的精彩；迟一天就多一天平庸的困扰. <em></em><strong>- 余秋雨</strong></p></li>
                        <li><p><span></span>Fusce euismod consequat ante. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Pellentesque sed dolor. Aliquam congue fermentum nisl. Mauris accumsan nulla vel diam. Sed in lacus ut enim adipiscing aliquet. Nulla venenatis. In pede mi, aliquet sit amet, euismod in, auctor ut, ligula. Aliquam dapibus tincidunt metus. <em></em><strong>- Marsha Lopes</strong></p></li>
                        <li><p><span></span>Fusce euismod consequat ante. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Pellentesque sed dolor. Aliquam congue fermentum nisl. Mauris accumsan nulla vel diam. Sed in lacus ut enim adipiscing aliquet. Nulla venenatis. In pede mi, aliquet sit amet, euismod in, auctor ut, ligula. Aliquam dapibus tincidunt metus. <em></em><strong>- Marsha Lopes</strong></p></li>
                    </ul>
                    <div class="foo-btn clearfix">
                        <div class="pagination" id="foo2_pag"></div>
                    </div>
                </div>
            </article>
            <section class="col-lg-12 col-md-12 col-sm-12 eventsBox">
                <h2>latest news and events</h2>
                <a href="index.html#">View more</a>
                <div class="row">
                    <article class="col-lg-4 col-md-4 col-sm-4">
                        <div class="thumb-pad2 maxheight2">
                            <div class="thumbnail">
                                <figure><img src="{{ STATIC_URL }}img/page1_pic7.jpg" alt=""></figure>
                                <div class="caption">
                                    <a href="index.html#">Exhibition</a>
                                    <p class="tl">Sed aliquet sit amet, euismod in,auctor</p>
                                    <hr>
                                    <p class="title"><strong>Now through January 4</strong><br>Library for the Performing Arts</p>
                                </div>
                            </div>
                        </div>
                    </article>
                    <article class="col-lg-4 col-md-4 col-sm-4">
                        <div class="thumb-pad2 maxheight2">
                            <div class="thumbnail">
                                <figure><img src="{{ STATIC_URL }}img/page1_pic8.jpg" alt=""></figure>
                                <div class="caption">
                                    <a href="index.html#">Free Exhibition</a>
                                    <p class="tl">In pede mi, aliquet sit amet, euismod in,auctor</p>
                                    <hr>
                                    <p class="title"><strong>Now through January 4</strong><br>Library for the Performing Arts</p>
                                </div>
                            </div>
                        </div>
                    </article>
                    <article class="col-lg-4 col-md-4 col-sm-4">
                        <div class="thumb-pad2 maxheight2">
                            <div class="thumbnail">
                                <figure><img src="{{ STATIC_URL }}img/page1_pic9.jpg" alt=""></figure>
                                <div class="caption">
                                    <a href="index.html#">Exhibition</a>
                                    <p class="tl">Mauris accumsan nulla vel diam</p>
                                    <hr>
                                    <p class="title"><strong>Now through January 4</strong><br>Library for the Performing Arts</p>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript">
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7078796-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript">
	var next=document.getElementById("next");
	var images=document.getElementById("images");
	var interval;
	var back=document.getElementById("back");
	var next=document.getElementById("next");
	var left=0;
	var pages=getElementsByClassName('list','div','page');
	var cur_page=0;
	var isFwd=false;
	var slide=new Slide();
	back.onclick=function(){
		if(cur_page > 0 && cur_page < 4){
			cur_page--;
			clearInterval(interval);
			slide.forward();
		}
	}
	next.onclick=function(){
		if(cur_page < 3){
		cur_page++;
		clearInterval(interval);
		slide.next();
	}
	}
	for(var i=0;i<pages.length;i++){
		pages[i].index=i;
		pages[i].onclick=function(){
			slide.jumpTo(this.index);
		}
	}
	changeFlag();
	function Slide(){
		this.forward=function(){
			isFwd=true;
			changeFlag();
			clearInterval(interval);
			interval=setInterval(function(){
				if(left < -cur_page*525){
					left+=25;
					images.style.left=left+"px";
				}else{
					clearInterval(interval);
				}
			},20);
		},
		this.next=function(){
			isFwd=false;
			changeFlag();
			clearInterval(interval);
			interval=setInterval(function(){
				if(left > -525*cur_page && cur_page<4){
					left-=25;
					images.style.left =left+"px";
				}else{
					clearInterval(interval);
				}
			},20);
		}
		this.jumpTo=function(page){
			cur_page=page;
			changeFlag();
			if(left>-525*cur_page){
				clearInterval(interval);
				interval=setInterval(function(){
					if(left > -525*cur_page){
						left-=25;
						images.style.left =left+"px";
					}else{
					clearInterval(interval);
					}
				},20);
			}else{
				clearInterval(interval);
				interval=setInterval(function(){
					if(left < -525*cur_page){
						left+=25;
						images.style.left =left+"px";
					}else{
						clearInterval(interval);
					}
				},20);
			}
		}
	}
	function changeFlag(){
		for(var i=0;i<pages.length;i++){
			pages[i].style.background="url(switch_dot_small.jpg) 0px 0px";
		}
		pages[cur_page].style.background="url(switch_dot_small.jpg) 8px 0px";
		switch(cur_page){
			case 0:
				back.style.background="url(left_right.gif) 0px 32px";
				next.style.background="url(left_right.gif) 30px 0px";
				back.style.cursor="auto";
				break;
			case 3:
				next.style.background="url(left_right.gif) 30px 32px";
				back.style.background="url(left_right.gif) 0px 0px";
				next.style.cursor="auto";
				break;
			default:
				back.style.cursor="pointer";
				next.style.cursor="pointer";
				back.style.background="url(left_right.gif) 0px 0px";
				next.style.background="url(left_right.gif) 30px 0px";
		}

	}
	function getElementsByClassName(fatherId,tagName,className){
		node = fatherId&&document.getElementById(fatherId) || document;
		tagName = tagName || "*";
		className = className.split(" ");
		var classNameLength = className.length;
		for(var i=0,j=classNameLength;i<j;i++){
			//创建匹配类名的正则
			className[i]= new RegExp("(^|\\s)" + className[i].replace(/\-/g, "\\-") + "(\\s|$)");
		}
		var elements = node.getElementsByTagName(tagName);
		var result = [];
		for(var i=0,j=elements.length,k=0;i<j;i++){//缓存length属性
			var element = elements[i];
			while(className[k++].test(element.className)){//优化循环
				if(k === classNameLength){
					result[result.length] = element;
					break;
				}
			}
			k = 0;
		}
		return result;
	}
</script>

{% endblock %}
